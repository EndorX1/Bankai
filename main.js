/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => Bankai
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var path = __toESM(require("path"));
var fs = __toESM(require("fs"));
var VIEW_TYPE_TABLE = "table-view";
var DEFAULT_SETTINGS = {
  DownloadInterval: 10,
  DownloadDirectory: "",
  PluginEnabled: true
};
var COL_NAME = "Name of the file";
var COL_SUBJECT = "Subject";
var COL_FOLDER = "Folder Path to the file";
var COL_DATE = "Date Added";
var Bankai = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.intervalId = null;
  }
  async onload() {
    await this.loadSettings();
    this.addCommand({ id: "SyncDB", name: "Sync Database", callback: () => this.SyncDatabase("sync") });
    this.registerView(VIEW_TYPE_TABLE, (leaf) => new TableView(leaf, this));
    this.addRibbonIcon("table", "Open Database Searcher", () => {
      this.activateView();
    });
    this.addSettingTab(new BankaiSettingTab(this.app, this));
    this.startInterval(this.settings.DownloadInterval);
  }
  onunload() {
    if (this.intervalId !== null) {
      window.clearInterval(this.intervalId);
      this.intervalId = null;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async isExeRunning(exeName) {
    return new Promise((resolve) => {
      (0, import_child_process.exec)("tasklist", (err, stdout) => {
        if (err) {
          resolve(false);
          return;
        }
        const running = stdout.toLowerCase().includes(exeName.toLowerCase());
        resolve(running);
      });
    });
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_TABLE);
    leaf = leaves.length > 0 ? leaves[0] : workspace.getRightLeaf(false);
    await (leaf == null ? void 0 : leaf.setViewState({ type: VIEW_TYPE_TABLE, active: true }));
    workspace.revealLeaf(leaf);
  }
  startInterval(minutes) {
    if (!this.settings.PluginEnabled) {
      if (this.intervalId !== null) {
        window.clearInterval(this.intervalId);
        this.intervalId = null;
      }
      return;
    }
    if (this.intervalId !== null) {
      window.clearInterval(this.intervalId);
    }
    const ms = Math.max(1, Math.floor(minutes)) * 60 * 1e3;
    this.intervalId = window.setInterval(() => this.SyncDatabase("sync"), ms);
    this.registerInterval(this.intervalId);
  }
  SyncDatabase(code) {
    const vaultBasePath = this.app.vault.adapter.basePath;
    const pluginId = this.manifest.id;
    const targetDir = path.join(vaultBasePath, this.settings.DownloadDirectory);
    const scriptPath = path.join(vaultBasePath, ".obsidian", "plugins", pluginId, "dependencies", "sync.exe");
    const args = [targetDir, code];
    this.isExeRunning("sync.exe").then((running) => {
      if (running) {
        new import_obsidian.Notice("Already running");
        return;
      }
      const subprocess = (0, import_child_process.spawn)(scriptPath, args);
      subprocess.on("error", (err) => {
        new import_obsidian.Notice(`Failed to start sync: ${String(err)}`);
      });
      subprocess.stdout.on("data", (data) => {
        new import_obsidian.Notice(String(data));
      });
      subprocess.stderr.on("data", (data) => {
        new import_obsidian.Notice(String(data));
      });
    });
  }
  resetData() {
    const vaultBasePath = this.app.vault.adapter.basePath;
    const pluginId = this.manifest.id;
    const purgePath = path.join(vaultBasePath, ".obsidian", "plugins", pluginId, "t-o");
    fs.rmSync(purgePath, { recursive: true, force: true });
    new import_obsidian.Notice("Data reset complete");
  }
};
var TableView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.allData = [];
    this.filteredData = [];
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_TABLE;
  }
  getDisplayText() {
    return "Table View";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    if (!container)
      return;
    container.empty();
    container.createEl("h2", { text: "Data Table" });
    try {
      this.allData = await this.loadJsonData();
      this.filteredData = [...this.allData];
      this.createControls(container);
      this.createTable(container, this.filteredData);
    } catch (e) {
      const msg = e instanceof Error ? e.message : String(e);
      container.createEl("p", { text: "Error loading data: " + msg });
    }
  }
  async loadJsonData() {
    const adapter = this.app.vault.adapter;
    const pluginId = this.plugin.manifest.id;
    const dataPath = `.obsidian/plugins/${pluginId}/dependencies/database.json`;
    const raw = await adapter.read(dataPath);
    const json = JSON.parse(raw);
    return this.extractFiles(json);
  }
  extractFiles(data) {
    const files = [];
    const traverse = (obj, subject, curPath) => {
      for (const key in obj) {
        if (key === "__FileData__" && typeof obj[key] === "object" && obj[key]) {
          for (const fileName in obj[key]) {
            files.push({
              [COL_NAME]: fileName,
              [COL_SUBJECT]: subject,
              [COL_FOLDER]: curPath,
              [COL_DATE]: String(obj[key][fileName])
            });
          }
        } else if (typeof obj[key] === "object" && obj[key] !== null) {
          const newPath = curPath ? `${curPath}/${key}` : key;
          traverse(obj[key], subject, newPath);
        }
      }
    };
    for (const subject in data) {
      traverse(data[subject], subject, subject);
    }
    return files;
  }
  createControls(container) {
    const controlsDiv = container.createEl("div");
    controlsDiv.style.marginBottom = "20px";
    const searchInput = controlsDiv.createEl("input");
    searchInput.type = "text";
    searchInput.placeholder = "Search files...";
    searchInput.style.width = "100%";
    searchInput.style.padding = "8px";
    searchInput.style.marginBottom = "10px";
    searchInput.addEventListener("input", () => this.filterData(searchInput.value));
    const buttonsDiv = controlsDiv.createEl("div");
    buttonsDiv.style.marginBottom = "10px";
    const nameBtn = buttonsDiv.createEl("button", { text: "Sort by Name" });
    nameBtn.style.marginRight = "10px";
    nameBtn.addEventListener("click", () => this.sortData(COL_NAME));
    const subjectBtn = buttonsDiv.createEl("button", { text: "Sort by Subject" });
    subjectBtn.addEventListener("click", () => this.sortData(COL_SUBJECT));
    const timeBtn = buttonsDiv.createEl("button", { text: "Sort by Time" });
    timeBtn.style.marginLeft = "10px";
    timeBtn.addEventListener("click", () => this.sortDataReverse(COL_DATE));
    const subjectButtonsDiv = controlsDiv.createEl("div");
    subjectButtonsDiv.style.marginBottom = "10px";
    const subjects = [...new Set(this.allData.map((item) => item[COL_SUBJECT]))];
    const allBtn = subjectButtonsDiv.createEl("button", { text: "All" });
    allBtn.style.marginRight = "10px";
    allBtn.addEventListener("click", () => this.filterBySubject(""));
    subjects.forEach((subject) => {
      const btn = subjectButtonsDiv.createEl("button", { text: subject });
      btn.style.marginRight = "10px";
      btn.addEventListener("click", () => this.filterBySubject(subject));
    });
    const timeButtonsDiv = controlsDiv.createEl("div");
    const todayBtn = timeButtonsDiv.createEl("button", { text: "Today" });
    todayBtn.style.marginRight = "10px";
    todayBtn.addEventListener("click", () => this.filterByDays(0));
    const daysLabel = timeButtonsDiv.createEl("span", { text: "Last Days:" });
    daysLabel.style.marginRight = "5px";
    const daysInput = timeButtonsDiv.createEl("input");
    daysInput.type = "number";
    daysInput.placeholder = "7";
    daysInput.style.width = "50px";
    daysInput.style.marginRight = "5px";
    daysInput.style.marginLeft = "10px";
    daysInput.addEventListener("input", () => {
      const days = parseInt(daysInput.value, 10);
      if (!Number.isNaN(days))
        this.filterByDays(days);
    });
  }
  filterData(searchTerm) {
    const term = searchTerm.trim().toLowerCase();
    if (!term) {
      this.filteredData = [...this.allData];
    } else {
      this.filteredData = this.allData.filter(
        (item) => item[COL_NAME].toLowerCase().includes(term) || item[COL_SUBJECT].toLowerCase().includes(term) || item[COL_FOLDER].toLowerCase().includes(term) || item[COL_DATE].toLowerCase().includes(term)
      );
    }
    this.updateTable();
  }
  sortData(field) {
    this.filteredData.sort((a, b) => a[field].localeCompare(b[field]));
    this.updateTable();
  }
  sortDataReverse(field) {
    this.filteredData.sort((a, b) => b[field].localeCompare(a[field]));
    this.updateTable();
  }
  filterBySubject(subject) {
    if (!subject) {
      this.filteredData = [...this.allData];
    } else {
      this.filteredData = this.allData.filter((item) => item[COL_SUBJECT] === subject);
    }
    this.updateTable();
  }
  filterByDays(days) {
    const now = new Date();
    const cutoff = new Date(now.getFullYear(), now.getMonth(), now.getDate() - days);
    const cutoffStr = cutoff.toISOString().split("T")[0];
    this.filteredData = this.allData.filter((item) => item[COL_DATE].split(" ")[0] >= cutoffStr);
    this.updateTable();
  }
  updateTable() {
    const container = this.containerEl.children[1];
    if (!container)
      return;
    const existing = container.querySelector("table");
    if (existing)
      existing.remove();
    this.createTable(container, this.filteredData);
  }
  createTable(container, data) {
    if (!data || data.length === 0) {
      container.createEl("p", { text: "No data available." });
      return;
    }
    const keys = Object.keys(data[0]);
    const table = container.createEl("table");
    table.style.width = "100%";
    table.style.borderCollapse = "collapse";
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    keys.forEach((key) => {
      const th = headerRow.createEl("th");
      th.textContent = key;
      th.style.border = "1px solid var(--background-modifier-border)";
      th.style.padding = "8px";
      th.style.backgroundColor = "var(--background-secondary)";
    });
    const tbody = table.createEl("tbody");
    data.forEach((row) => {
      const tr = tbody.createEl("tr");
      keys.forEach((key) => {
        const td = tr.createEl("td");
        td.textContent = row[key];
        td.style.border = "1px solid var(--background-modifier-border)";
        td.style.padding = "8px";
        if (key === COL_NAME) {
          td.style.cursor = "pointer";
          td.style.color = "var(--text-accent)";
          td.addEventListener("click", () => {
            const fullPath = `${row[COL_FOLDER]}/${row[key]}`;
            navigator.clipboard.writeText(fullPath);
            new import_obsidian.Notice("Copied path to clipboard");
          });
        }
      });
    });
    container.appendChild(table);
  }
  async onClose() {
  }
};
var BankaiSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Enable").setDesc("Enables Plugin").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.PluginEnabled).onChange(async (value) => {
        this.plugin.settings.PluginEnabled = value;
        await this.plugin.saveData(this.plugin.settings);
        this.plugin.startInterval(this.plugin.settings.DownloadInterval);
      })
    );
    new import_obsidian.Setting(containerEl).setName("Download Interval (min)").setDesc("Time interval to update file database").addText(
      (text) => text.setPlaceholder("Minutes").setValue(String(this.plugin.settings.DownloadInterval)).onChange(async (value) => {
        const minutes = parseInt(value, 10);
        this.plugin.settings.DownloadInterval = Number.isNaN(minutes) ? DEFAULT_SETTINGS.DownloadInterval : minutes;
        await this.plugin.saveData(this.plugin.settings);
        this.plugin.startInterval(this.plugin.settings.DownloadInterval);
      })
    );
    new import_obsidian.Setting(containerEl).setName("Directory").setDesc("File saving location").addText(
      (text) => text.setPlaceholder("").setValue(this.plugin.settings.DownloadDirectory).onChange(async (value) => {
        this.plugin.settings.DownloadDirectory = value;
        await this.plugin.saveData(this.plugin.settings);
      })
    );
    new import_obsidian.Setting(containerEl).setName("Run Setup").setDesc("Initialize the plugin and download dependencies").addButton((button) => {
      button.setButtonText("Run Setup").onClick(() => this.plugin.SyncDatabase("setup"));
    });
    new import_obsidian.Setting(containerEl).setName("Reset Data").setDesc("Clear browser data and cookies. If you experience problems, try this.").addButton(
      (button) => button.setButtonText("Reset Data").onClick(() => new ResetConfirmModal(this.app, () => this.plugin.resetData()).open())
    );
  }
};
var ResetConfirmModal = class extends import_obsidian.Modal {
  constructor(app, callback) {
    super(app);
    this.callback = callback;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Are you sure?" });
    contentEl.createEl("p", { text: "You will have to run setup again." });
    const buttonDiv = contentEl.createEl("div");
    buttonDiv.style.display = "flex";
    buttonDiv.style.gap = "10px";
    buttonDiv.style.justifyContent = "center";
    buttonDiv.style.marginTop = "20px";
    const yesBtn = buttonDiv.createEl("button", { text: "Yes" });
    yesBtn.addEventListener("click", () => {
      this.callback();
      this.close();
    });
    const noBtn = buttonDiv.createEl("button", { text: "No" });
    noBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBJdGVtVmlldywgUGx1Z2luLCBXb3Jrc3BhY2VMZWFmLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc3Bhd24sIGV4ZWMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5cbmNvbnN0IFZJRVdfVFlQRV9UQUJMRSA9ICd0YWJsZS12aWV3JyBhcyBjb25zdDtcblxuaW50ZXJmYWNlIFBsdWdpblNldHRpbmdzIHtcblx0RG93bmxvYWRJbnRlcnZhbDogbnVtYmVyO1xuXHREb3dubG9hZERpcmVjdG9yeTogc3RyaW5nO1xuXHRQbHVnaW5FbmFibGVkOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5TZXR0aW5ncyA9IHtcblx0RG93bmxvYWRJbnRlcnZhbDogMTAsXG5cdERvd25sb2FkRGlyZWN0b3J5OiAnJyxcblx0UGx1Z2luRW5hYmxlZDogdHJ1ZSxcbn07XG5cbmNvbnN0IENPTF9OQU1FID0gJ05hbWUgb2YgdGhlIGZpbGUnO1xuY29uc3QgQ09MX1NVQkpFQ1QgPSAnU3ViamVjdCc7XG5jb25zdCBDT0xfRk9MREVSID0gJ0ZvbGRlciBQYXRoIHRvIHRoZSBmaWxlJztcbmNvbnN0IENPTF9EQVRFID0gJ0RhdGUgQWRkZWQnO1xuXG50eXBlIFJvdyA9IFJlY29yZDx0eXBlb2YgQ09MX05BTUUgfCB0eXBlb2YgQ09MX1NVQkpFQ1QgfCB0eXBlb2YgQ09MX0ZPTERFUiB8IHR5cGVvZiBDT0xfREFURSwgc3RyaW5nPjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFua2FpIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3MhOiBQbHVnaW5TZXR0aW5ncztcblx0cHJpdmF0ZSBpbnRlcnZhbElkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7IGlkOiAnU3luY0RCJywgbmFtZTogJ1N5bmMgRGF0YWJhc2UnLCBjYWxsYmFjazogKCkgPT4gdGhpcy5TeW5jRGF0YWJhc2UoJ3N5bmMnKSB9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9UQUJMRSwgKGxlYWYpID0+IG5ldyBUYWJsZVZpZXcobGVhZiwgdGhpcykpO1xuXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKCd0YWJsZScsICdPcGVuIERhdGFiYXNlIFNlYXJjaGVyJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQmFua2FpU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5zdGFydEludGVydmFsKHRoaXMuc2V0dGluZ3MuRG93bmxvYWRJbnRlcnZhbCk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRpZiAodGhpcy5pbnRlcnZhbElkICE9PSBudWxsKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuXHRcdFx0dGhpcy5pbnRlcnZhbElkID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGlzRXhlUnVubmluZyhleGVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGV4ZWMoJ3Rhc2tsaXN0JywgKGVyciwgc3Rkb3V0KSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgcnVubmluZyA9IHN0ZG91dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGV4ZU5hbWUudG9Mb3dlckNhc2UoKSk7XG5cdFx0XHRcdHJlc29sdmUocnVubmluZyk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcblx0XHRjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9UQUJMRSk7XG5cblx0XHRsZWFmID0gbGVhdmVzLmxlbmd0aCA+IDAgPyBsZWF2ZXNbMF0gOiB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfVEFCTEUsIGFjdGl2ZTogdHJ1ZSB9KTtcblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmISk7XG5cdH1cblxuXHRzdGFydEludGVydmFsKG1pbnV0ZXM6IG51bWJlcikge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5QbHVnaW5FbmFibGVkKSB7XG5cdFx0XHRpZiAodGhpcy5pbnRlcnZhbElkICE9PSBudWxsKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG5cdFx0XHRcdHRoaXMuaW50ZXJ2YWxJZCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaW50ZXJ2YWxJZCAhPT0gbnVsbCkge1xuXHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcblx0XHR9XG5cblx0XHRjb25zdCBtcyA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IobWludXRlcykpICogNjAgKiAxMDAwO1xuXHRcdHRoaXMuaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLlN5bmNEYXRhYmFzZSgnc3luYycpLCBtcyk7XG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG5cdH1cblxuXHRTeW5jRGF0YWJhc2UoY29kZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgdmF1bHRCYXNlUGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGggYXMgc3RyaW5nOyAvLyBEZXNrdG9wIG9ubHlcblx0XHRjb25zdCBwbHVnaW5JZCA9IHRoaXMubWFuaWZlc3QuaWQ7XG5cdFx0Y29uc3QgdGFyZ2V0RGlyID0gcGF0aC5qb2luKHZhdWx0QmFzZVBhdGgsIHRoaXMuc2V0dGluZ3MuRG93bmxvYWREaXJlY3RvcnkpO1xuXHRcdGNvbnN0IHNjcmlwdFBhdGggPSBwYXRoLmpvaW4odmF1bHRCYXNlUGF0aCwgJy5vYnNpZGlhbicsICdwbHVnaW5zJywgcGx1Z2luSWQsICdkZXBlbmRlbmNpZXMnLCAnc3luYy5leGUnKTtcblx0XHRjb25zdCBhcmdzID0gW3RhcmdldERpciwgY29kZV07XG5cblx0XHR0aGlzLmlzRXhlUnVubmluZygnc3luYy5leGUnKS50aGVuKChydW5uaW5nKSA9PiB7XG5cdFx0XHRpZiAocnVubmluZykge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdBbHJlYWR5IHJ1bm5pbmcnKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdWJwcm9jZXNzID0gc3Bhd24oc2NyaXB0UGF0aCwgYXJncyk7XG5cblx0XHRcdHN1YnByb2Nlc3Mub24oJ2Vycm9yJywgKGVycikgPT4ge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gc3RhcnQgc3luYzogJHtTdHJpbmcoZXJyKX1gKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRzdWJwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoU3RyaW5nKGRhdGEpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRzdWJwcm9jZXNzLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoU3RyaW5nKGRhdGEpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cmVzZXREYXRhKCkge1xuXHRcdGNvbnN0IHZhdWx0QmFzZVBhdGggPSAodGhpcy5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmJhc2VQYXRoIGFzIHN0cmluZztcblx0XHRjb25zdCBwbHVnaW5JZCA9IHRoaXMubWFuaWZlc3QuaWQ7XG5cdFx0Y29uc3QgcHVyZ2VQYXRoID0gcGF0aC5qb2luKHZhdWx0QmFzZVBhdGgsICcub2JzaWRpYW4nLCAncGx1Z2lucycsIHBsdWdpbklkLCAndC1vJyk7XG5cdFx0ZnMucm1TeW5jKHB1cmdlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuXHRcdG5ldyBOb3RpY2UoJ0RhdGEgcmVzZXQgY29tcGxldGUnKTtcblx0fVxufVxuXG5jbGFzcyBUYWJsZVZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG5cdHByaXZhdGUgcGx1Z2luOiBCYW5rYWk7XG5cdHByaXZhdGUgYWxsRGF0YTogUm93W10gPSBbXTtcblx0cHJpdmF0ZSBmaWx0ZXJlZERhdGE6IFJvd1tdID0gW107XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBCYW5rYWkpIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGdldFZpZXdUeXBlKCkge1xuXHRcdHJldHVybiBWSUVXX1RZUEVfVEFCTEU7XG5cdH1cblxuXHRnZXREaXNwbGF5VGV4dCgpIHtcblx0XHRyZXR1cm4gJ1RhYmxlIFZpZXcnO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG5cdFx0aWYgKCFjb250YWluZXIpIHJldHVybjtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRGF0YSBUYWJsZScgfSk7XG5cblx0XHR0cnkge1xuXHRcdFx0dGhpcy5hbGxEYXRhID0gYXdhaXQgdGhpcy5sb2FkSnNvbkRhdGEoKTtcblx0XHRcdHRoaXMuZmlsdGVyZWREYXRhID0gWy4uLnRoaXMuYWxsRGF0YV07XG5cdFx0XHR0aGlzLmNyZWF0ZUNvbnRyb2xzKGNvbnRhaW5lcik7XG5cdFx0XHR0aGlzLmNyZWF0ZVRhYmxlKGNvbnRhaW5lciwgdGhpcy5maWx0ZXJlZERhdGEpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNvbnN0IG1zZyA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFN0cmluZyhlKTtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0Vycm9yIGxvYWRpbmcgZGF0YTogJyArIG1zZyB9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWRKc29uRGF0YSgpOiBQcm9taXNlPFJvd1tdPiB7XG5cdFx0Y29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cdFx0Y29uc3QgcGx1Z2luSWQgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdC5pZDtcblx0XHRjb25zdCBkYXRhUGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke3BsdWdpbklkfS9kZXBlbmRlbmNpZXMvZGF0YWJhc2UuanNvbmA7XG5cdFx0Y29uc3QgcmF3ID0gYXdhaXQgYWRhcHRlci5yZWFkKGRhdGFQYXRoKTtcblx0XHRjb25zdCBqc29uID0gSlNPTi5wYXJzZShyYXcpO1xuXHRcdHJldHVybiB0aGlzLmV4dHJhY3RGaWxlcyhqc29uKTtcblx0fVxuXG5cdHByaXZhdGUgZXh0cmFjdEZpbGVzKGRhdGE6IGFueSk6IFJvd1tdIHtcblx0XHRjb25zdCBmaWxlczogUm93W10gPSBbXTtcblxuXHRcdGNvbnN0IHRyYXZlcnNlID0gKG9iajogYW55LCBzdWJqZWN0OiBzdHJpbmcsIGN1clBhdGg6IHN0cmluZykgPT4ge1xuXHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG5cdFx0XHRcdGlmIChrZXkgPT09ICdfX0ZpbGVEYXRhX18nICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gJ29iamVjdCcgJiYgb2JqW2tleV0pIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGZpbGVOYW1lIGluIG9ialtrZXldKSB7XG5cdFx0XHRcdFx0XHRmaWxlcy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0W0NPTF9OQU1FXTogZmlsZU5hbWUsXG5cdFx0XHRcdFx0XHRcdFtDT0xfU1VCSkVDVF06IHN1YmplY3QsXG5cdFx0XHRcdFx0XHRcdFtDT0xfRk9MREVSXTogY3VyUGF0aCxcblx0XHRcdFx0XHRcdFx0W0NPTF9EQVRFXTogU3RyaW5nKG9ialtrZXldW2ZpbGVOYW1lXSksXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0JyAmJiBvYmpba2V5XSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBjdXJQYXRoID8gYCR7Y3VyUGF0aH0vJHtrZXl9YCA6IGtleTtcblx0XHRcdFx0XHR0cmF2ZXJzZShvYmpba2V5XSwgc3ViamVjdCwgbmV3UGF0aCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Zm9yIChjb25zdCBzdWJqZWN0IGluIGRhdGEpIHtcblx0XHRcdHRyYXZlcnNlKGRhdGFbc3ViamVjdF0sIHN1YmplY3QsIHN1YmplY3QpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaWxlcztcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlQ29udHJvbHMoY29udGFpbmVyOiBFbGVtZW50KSB7XG5cdFx0Y29uc3QgY29udHJvbHNEaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdGNvbnRyb2xzRGl2LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcblxuXHRcdGNvbnN0IHNlYXJjaElucHV0ID0gY29udHJvbHNEaXYuY3JlYXRlRWwoJ2lucHV0Jyk7XG5cdFx0c2VhcmNoSW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0XHRzZWFyY2hJbnB1dC5wbGFjZWhvbGRlciA9ICdTZWFyY2ggZmlsZXMuLi4nO1xuXHRcdHNlYXJjaElucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRcdHNlYXJjaElucHV0LnN0eWxlLnBhZGRpbmcgPSAnOHB4Jztcblx0XHRzZWFyY2hJbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG5cdFx0c2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB0aGlzLmZpbHRlckRhdGEoc2VhcmNoSW5wdXQudmFsdWUpKTtcblxuXHRcdGNvbnN0IGJ1dHRvbnNEaXYgPSBjb250cm9sc0Rpdi5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0YnV0dG9uc0Rpdi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG5cdFx0Y29uc3QgbmFtZUJ0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1NvcnQgYnkgTmFtZScgfSk7XG5cdFx0bmFtZUJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4Jztcblx0XHRuYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zb3J0RGF0YShDT0xfTkFNRSkpO1xuXG5cdFx0Y29uc3Qgc3ViamVjdEJ0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1NvcnQgYnkgU3ViamVjdCcgfSk7XG5cdFx0c3ViamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc29ydERhdGEoQ09MX1NVQkpFQ1QpKTtcblxuXHRcdGNvbnN0IHRpbWVCdG4gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTb3J0IGJ5IFRpbWUnIH0pO1xuXHRcdHRpbWVCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4Jztcblx0XHR0aW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zb3J0RGF0YVJldmVyc2UoQ09MX0RBVEUpKTtcblxuXHRcdGNvbnN0IHN1YmplY3RCdXR0b25zRGl2ID0gY29udHJvbHNEaXYuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdHN1YmplY3RCdXR0b25zRGl2LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4Jztcblx0XHRjb25zdCBzdWJqZWN0cyA9IFsuLi5uZXcgU2V0KHRoaXMuYWxsRGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW1bQ09MX1NVQkpFQ1RdKSldO1xuXG5cdFx0Y29uc3QgYWxsQnRuID0gc3ViamVjdEJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FsbCcgfSk7XG5cdFx0YWxsQnRuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzEwcHgnO1xuXHRcdGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZmlsdGVyQnlTdWJqZWN0KCcnKSk7XG5cblx0XHRzdWJqZWN0cy5mb3JFYWNoKChzdWJqZWN0KSA9PiB7XG5cdFx0XHRjb25zdCBidG4gPSBzdWJqZWN0QnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBzdWJqZWN0IH0pO1xuXHRcdFx0YnRuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzEwcHgnO1xuXHRcdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5maWx0ZXJCeVN1YmplY3Qoc3ViamVjdCkpO1xuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGltZUJ1dHRvbnNEaXYgPSBjb250cm9sc0Rpdi5jcmVhdGVFbCgnZGl2Jyk7XG5cblx0XHRjb25zdCB0b2RheUJ0biA9IHRpbWVCdXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdUb2RheScgfSk7XG5cdFx0dG9kYXlCdG4uc3R5bGUubWFyZ2luUmlnaHQgPSAnMTBweCc7XG5cdFx0dG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmZpbHRlckJ5RGF5cygwKSk7XG5cblx0XHRjb25zdCBkYXlzTGFiZWwgPSB0aW1lQnV0dG9uc0Rpdi5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0xhc3QgRGF5czonIH0pO1xuXHRcdGRheXNMYWJlbC5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xuXG5cdFx0Y29uc3QgZGF5c0lucHV0ID0gdGltZUJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2lucHV0Jyk7XG5cdFx0ZGF5c0lucHV0LnR5cGUgPSAnbnVtYmVyJztcblx0XHRkYXlzSW5wdXQucGxhY2Vob2xkZXIgPSAnNyc7XG5cdFx0ZGF5c0lucHV0LnN0eWxlLndpZHRoID0gJzUwcHgnO1xuXHRcdGRheXNJbnB1dC5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xuXHRcdGRheXNJbnB1dC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEwcHgnO1xuXHRcdGRheXNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcblx0XHRcdGNvbnN0IGRheXMgPSBwYXJzZUludChkYXlzSW5wdXQudmFsdWUsIDEwKTtcblx0XHRcdGlmICghTnVtYmVyLmlzTmFOKGRheXMpKSB0aGlzLmZpbHRlckJ5RGF5cyhkYXlzKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgZmlsdGVyRGF0YShzZWFyY2hUZXJtOiBzdHJpbmcpIHtcblx0XHRjb25zdCB0ZXJtID0gc2VhcmNoVGVybS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAoIXRlcm0pIHtcblx0XHRcdHRoaXMuZmlsdGVyZWREYXRhID0gWy4uLnRoaXMuYWxsRGF0YV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZmlsdGVyZWREYXRhID0gdGhpcy5hbGxEYXRhLmZpbHRlcigoaXRlbSkgPT5cblx0XHRcdFx0aXRlbVtDT0xfTkFNRV0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSB8fFxuXHRcdFx0XHRpdGVtW0NPTF9TVUJKRUNUXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pIHx8XG5cdFx0XHRcdGl0ZW1bQ09MX0ZPTERFUl0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSB8fFxuXHRcdFx0XHRpdGVtW0NPTF9EQVRFXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pLFxuXHRcdFx0KTtcblx0XHR9XG5cdFx0dGhpcy51cGRhdGVUYWJsZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBzb3J0RGF0YShmaWVsZDoga2V5b2YgUm93KSB7XG5cdFx0dGhpcy5maWx0ZXJlZERhdGEuc29ydCgoYSwgYikgPT4gYVtmaWVsZF0ubG9jYWxlQ29tcGFyZShiW2ZpZWxkXSkpO1xuXHRcdHRoaXMudXBkYXRlVGFibGUoKTtcblx0fVxuXG5cdHByaXZhdGUgc29ydERhdGFSZXZlcnNlKGZpZWxkOiBrZXlvZiBSb3cpIHtcblx0XHR0aGlzLmZpbHRlcmVkRGF0YS5zb3J0KChhLCBiKSA9PiBiW2ZpZWxkXS5sb2NhbGVDb21wYXJlKGFbZmllbGRdKSk7XG5cdFx0dGhpcy51cGRhdGVUYWJsZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBmaWx0ZXJCeVN1YmplY3Qoc3ViamVjdDogc3RyaW5nKSB7XG5cdFx0aWYgKCFzdWJqZWN0KSB7XG5cdFx0XHR0aGlzLmZpbHRlcmVkRGF0YSA9IFsuLi50aGlzLmFsbERhdGFdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmZpbHRlcmVkRGF0YSA9IHRoaXMuYWxsRGF0YS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW1bQ09MX1NVQkpFQ1RdID09PSBzdWJqZWN0KTtcblx0XHR9XG5cdFx0dGhpcy51cGRhdGVUYWJsZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBmaWx0ZXJCeURheXMoZGF5czogbnVtYmVyKSB7XG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCBjdXRvZmYgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkgLSBkYXlzKTtcblx0XHRjb25zdCBjdXRvZmZTdHIgPSBjdXRvZmYudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXHRcdHRoaXMuZmlsdGVyZWREYXRhID0gdGhpcy5hbGxEYXRhLmZpbHRlcigoaXRlbSkgPT4gaXRlbVtDT0xfREFURV0uc3BsaXQoJyAnKVswXSA+PSBjdXRvZmZTdHIpO1xuXHRcdHRoaXMudXBkYXRlVGFibGUoKTtcblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlVGFibGUoKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcblx0XHRpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdGNvbnN0IGV4aXN0aW5nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XG5cdFx0aWYgKGV4aXN0aW5nKSBleGlzdGluZy5yZW1vdmUoKTtcblx0XHR0aGlzLmNyZWF0ZVRhYmxlKGNvbnRhaW5lciwgdGhpcy5maWx0ZXJlZERhdGEpO1xuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVUYWJsZShjb250YWluZXI6IEVsZW1lbnQsIGRhdGE6IFJvd1tdKSB7XG5cdFx0aWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBkYXRhIGF2YWlsYWJsZS4nIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhWzBdKSBhcyAoa2V5b2YgUm93KVtdO1xuXG5cdFx0Y29uc3QgdGFibGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJyk7XG5cdFx0dGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdFx0dGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xuXG5cdFx0Y29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcblx0XHRjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcblx0XHRrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0Y29uc3QgdGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJyk7XG5cdFx0XHR0aC50ZXh0Q29udGVudCA9IGtleSBhcyBzdHJpbmc7XG5cdFx0XHR0aC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cdFx0XHR0aC5zdHlsZS5wYWRkaW5nID0gJzhweCc7XG5cdFx0XHR0aC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcblx0XHR9KTtcblxuXHRcdGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG5cdFx0ZGF0YS5mb3JFYWNoKChyb3cpID0+IHtcblx0XHRcdGNvbnN0IHRyID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG5cdFx0XHRrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0XHRjb25zdCB0ZCA9IHRyLmNyZWF0ZUVsKCd0ZCcpO1xuXHRcdFx0XHR0ZC50ZXh0Q29udGVudCA9IHJvd1trZXldO1xuXHRcdFx0XHR0ZC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cdFx0XHRcdHRkLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcblxuXHRcdFx0XHRpZiAoa2V5ID09PSBDT0xfTkFNRSkge1xuXHRcdFx0XHRcdHRkLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcblx0XHRcdFx0XHR0ZC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWFjY2VudCknO1xuXHRcdFx0XHRcdHRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZnVsbFBhdGggPSBgJHtyb3dbQ09MX0ZPTERFUl19LyR7cm93W2tleV19YDtcblx0XHRcdFx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGZ1bGxQYXRoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0NvcGllZCBwYXRoIHRvIGNsaXBib2FyZCcpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG5cdH1cblxuXHRhc3luYyBvbkNsb3NlKCkge31cbn1cblxuY2xhc3MgQmFua2FpU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwcml2YXRlIHBsdWdpbjogQmFua2FpO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJhbmthaSkge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlJylcblx0XHRcdC5zZXREZXNjKCdFbmFibGVzIFBsdWdpbicpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5QbHVnaW5FbmFibGVkKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlBsdWdpbkVuYWJsZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnN0YXJ0SW50ZXJ2YWwodGhpcy5wbHVnaW4uc2V0dGluZ3MuRG93bmxvYWRJbnRlcnZhbCk7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRG93bmxvYWQgSW50ZXJ2YWwgKG1pbiknKVxuXHRcdFx0LnNldERlc2MoJ1RpbWUgaW50ZXJ2YWwgdG8gdXBkYXRlIGZpbGUgZGF0YWJhc2UnKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ01pbnV0ZXMnKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuRG93bmxvYWRJbnRlcnZhbCkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbWludXRlcyA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Eb3dubG9hZEludGVydmFsID0gTnVtYmVyLmlzTmFOKG1pbnV0ZXMpID8gREVGQVVMVF9TRVRUSU5HUy5Eb3dubG9hZEludGVydmFsIDogbWludXRlcztcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnN0YXJ0SW50ZXJ2YWwodGhpcy5wbHVnaW4uc2V0dGluZ3MuRG93bmxvYWRJbnRlcnZhbCk7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGlyZWN0b3J5Jylcblx0XHRcdC5zZXREZXNjKCdGaWxlIHNhdmluZyBsb2NhdGlvbicpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignJylcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuRG93bmxvYWREaXJlY3RvcnkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuRG93bmxvYWREaXJlY3RvcnkgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHR9KSxcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSdW4gU2V0dXAnKVxuXHRcdFx0LnNldERlc2MoJ0luaXRpYWxpemUgdGhlIHBsdWdpbiBhbmQgZG93bmxvYWQgZGVwZW5kZW5jaWVzJylcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnUnVuIFNldHVwJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLnBsdWdpbi5TeW5jRGF0YWJhc2UoJ3NldHVwJykpO1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZXNldCBEYXRhJylcblx0XHRcdC5zZXREZXNjKCdDbGVhciBicm93c2VyIGRhdGEgYW5kIGNvb2tpZXMuIElmIHlvdSBleHBlcmllbmNlIHByb2JsZW1zLCB0cnkgdGhpcy4nKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnUmVzZXQgRGF0YScpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gbmV3IFJlc2V0Q29uZmlybU1vZGFsKHRoaXMuYXBwLCAoKSA9PiB0aGlzLnBsdWdpbi5yZXNldERhdGEoKSkub3BlbigpKSxcblx0XHRcdCk7XG5cdH1cbn1cblxuY2xhc3MgUmVzZXRDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByaXZhdGUgY2FsbGJhY2s6ICgpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0FyZSB5b3Ugc3VyZT8nIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1lvdSB3aWxsIGhhdmUgdG8gcnVuIHNldHVwIGFnYWluLicgfSk7XG5cblx0XHRjb25zdCBidXR0b25EaXYgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdGJ1dHRvbkRpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGJ1dHRvbkRpdi5zdHlsZS5nYXAgPSAnMTBweCc7XG5cdFx0YnV0dG9uRGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG5cdFx0YnV0dG9uRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcblxuXHRcdGNvbnN0IHllc0J0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWWVzJyB9KTtcblx0XHR5ZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmNhbGxiYWNrKCk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBub0J0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTm8nIH0pO1xuXHRcdG5vQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUErRjtBQUMvRiwyQkFBNEI7QUFDNUIsV0FBc0I7QUFDdEIsU0FBb0I7QUFFcEIsSUFBTSxrQkFBa0I7QUFReEIsSUFBTSxtQkFBbUM7QUFBQSxFQUN4QyxrQkFBa0I7QUFBQSxFQUNsQixtQkFBbUI7QUFBQSxFQUNuQixlQUFlO0FBQ2hCO0FBRUEsSUFBTSxXQUFXO0FBQ2pCLElBQU0sY0FBYztBQUNwQixJQUFNLGFBQWE7QUFDbkIsSUFBTSxXQUFXO0FBSWpCLElBQXFCLFNBQXJCLGNBQW9DLHVCQUFPO0FBQUEsRUFBM0M7QUFBQTtBQUVDLFNBQVEsYUFBNEI7QUFBQTtBQUFBLEVBRXBDLE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFNBQUssV0FBVyxFQUFFLElBQUksVUFBVSxNQUFNLGlCQUFpQixVQUFVLE1BQU0sS0FBSyxhQUFhLE1BQU0sRUFBRSxDQUFDO0FBRWxHLFNBQUssYUFBYSxpQkFBaUIsQ0FBQyxTQUFTLElBQUksVUFBVSxNQUFNLElBQUksQ0FBQztBQUV0RSxTQUFLLGNBQWMsU0FBUywwQkFBMEIsTUFBTTtBQUMzRCxXQUFLLGFB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
